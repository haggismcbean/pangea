<form class="table">
	<fieldset class="fieldset">
		<legend class="header">
			Location
		</legend>
		<div class="location__title">
			<div class="location__weather">
				<pre class="location__weather-glyph"
					 [innerHtml]="weatherGlyph">
				</pre>
				<span>{{location.weather}}</span>
			</div>
			<div class="location__description">
				<span>{{location.description}}</span>
				<div>
					<span>It has an average amount of plants</span>
					<span class="link">
						[See plants]
					</span>
				</div>
			</div>
		</div>

		<div class="table__options">
			<legend class="link header table__options-header"
					(click)="showTab('isShowingItems')">
				Items
			</legend>
			<legend class="link header table__options-header"
					(click)="showTab('isShowingPeople')">
				People
			</legend>
			<legend class="link header table__options-header"
					(click)="showTab('isShowingActivities')">
				Activities
			</legend>
		</div>

		<div class="location__items"
			 *ngIf="location.display.tabs.isShowingItems">
			<span class="announcement">Items</span>
			<div *ngIf="!location.display.isShowingItems">
				<span>{{location.items.length}} things lying around</span>
				<span class="link"
					  (click)="toggleShowItems()">
					Show
				</span>
			</div>

			<div class="location__items-list"
				 *ngIf="location.display.isShowingItems">
				<div *ngFor="let item of location.items"
					 class="expandable"
					 (click)="item.isShowing = !item.isShowing"
					 [ngClass]="{'expandable--is-showing': !!item.isShowing}">

					{{item.count}} {{item.name}}

					<span class="link"
						  (click)="collect(item)">
						<span>[take]</span>
					</span>

					<div class="expandable__detail"
						 *ngIf="item.isShowing">
						{{item.description}}
					</div>
				</div>

				<span class="link"
					  (click)="toggleShowItems()">
					Hide
				</span>
			</div>
		</div>

		<div class="location__people"
			 *ngIf="location.display.tabs.isShowingPeople">
			<span class="announcement">People</span>
			<div *ngFor="let person of location.characters">
				<div class="expandable"
					 (click)="person.isShowing = !person.isShowing"
					 *ngIf="person.isAwake && !location.display.isShowingSleepers || location.display.isShowingSleepers"
					 [ngClass]="{'expandable--is-showing': !!person.isShowing}">

					<div class="location__person-online"
						 *ngIf="person.isAwake">
					</div>
					{{person.name}}

					<span class="link"
						  (click)="talk($event, person)">
						[Talk]
					</span>

					<span class="link">
						[Give]
					</span>

					<span class="link">
						[Point]
					</span>

					<span class="link">
						[Attack]
					</span>

					<div class="expandable__detail"
						 *ngIf="person.isShowing">
						{{person.appearance}}
					</div>
				</div>
			</div>

			<div class="location__sleeping-people">
				<div *ngIf="!location.display.isShowingSleepers">
					Plus {{location.asleepPeopleCount}} people sleeping

					<span class="link"
						  (click)="toggleShowSleepers()">
						Show
					</span>
				</div>

				<div *ngIf="location.display.isShowingSleepers"
					 class="link"
					 (click)="toggleShowSleepers()">
					Hide
				</div>
			</div>
		</div>

		<div class="location__activities"
			 *ngIf="location.display.tabs.isShowingActivities">
			<span class="announcement">Activities</span>
			<div *ngFor="let activity of location.activities">
				<div class="expandable"
					 (click)="activity.isShowing = !activity.isShowing"
					 [ngClass]="{'expandable--is-showing': !!activity.isShowing}">

					{{activity}}
				</div>
			</div>
		</div>
	</fieldset>
</form>
